---
- name: ğŸš€ SOC LAB DASHBOARD
  hosts: localhost
  connection: local
  tasks:
    - name: Display SOC Dashboard Header
      debug:
        msg: |
          ğŸ›¡ï¸  SOC LAB MANAGEMENT DASHBOARD
          ================================
          Managed by Ansible from Kali Linux
          Total Servers: {{ groups['security_tools'] | length }}

- name: Health Status Overview
  hosts: security_tools
  become: yes
  tasks:
    - name: Collect basic health info
      shell: |
        echo "Disk: $(df -h / | awk 'NR==2 {print $5}')"
        echo "Memory: $(free | awk 'NR==2{printf "%.1f%%", $3*100/$2}')"
        echo "Load: $(cat /proc/loadavg | cut -d' ' -f1)"
      register: health_info
      changed_when: false

    - name: Display server status
      debug:
        msg: |
          ğŸ–¥ï¸  {{ inventory_hostname }}
          ğŸ’¾ {{ (health_info.stdout_lines[0].split(":")[1] | trim) }}
          ğŸ§  {{ (health_info.stdout_lines[1].split(":")[1] | trim) }}
          ğŸ“Š {{ (health_info.stdout_lines[2].split(":")[1] | trim) }}
          {% if 'docker' in group_names %}ğŸ³ Docker: Running{% endif %}
          {% if 'soc_core' in group_names %}ğŸ›¡ï¸  SOC Core{% endif %}
          {% if 'mailcow_docker' in group_names %}ğŸ“§ Mail Server{% endif %}
          {% if 'wazuh_manager' in group_names %}ğŸ“ˆ Wazuh Manager{% endif %}
          {% if 'splunk_server' in group_names %}ğŸ“Š Splunk Server{% endif %}
          {% if 'cowrie_honeypot' in group_names %}ğŸ¯ Honeypot{% endif %}
